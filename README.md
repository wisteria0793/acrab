# Guest Portal (民泊 BYOD プラットフォーム)

本アプリケーションは、民泊（Minpaku）向けのゲスト体験プラットフォーム（フロントエンド）です。ゲストが自身のスマートフォン（BYOD）を使ってアクセスすることを前提に設計されています。

## 🚀 現在のステータス (実装フェーズ 1)

**完成度: 90% (フロントエンド/UX体験)**

コアとなるユーザー体験とフロントエンドロジックの実装が完了しました。モバイルデバイスでの利用を想定し、**Glassmorphism（すりガラス）**を取り入れたプレミアムなデザインを採用しています。

### ✅ 実装済みの機能
*   **プレミアム UX/UI**: ダークモードを基調とし、Framer Motionによる滑らかなアニメーションを実装。
*   **チェックインウィザード**: 予約特定 → 本人確認 → 宿泊者名簿提出（法令対応） → 宿泊税決済 までの一連のフロー。
*   **AIコンシェルジュ**: OpenAI APIと連携したチャットインターフェース（APIキー未設定時はデモモードで動作）。
*   **拡張機能**: アメニティの追加依頼（カウンターUI）、周辺観光スポット案内。
*   **アーキテクチャ**: Next.js App RouterとTypeScriptを用いた、拡張性の高いMonorepo構成。

## 🗺️ 開発ロードマップ (Step-by-Step)

今後の開発は以下のフェーズに分けて段階的に実装を進めます。

### Phase 1: バックエンド基盤の構築 (Current Focus)
まずはデータの永続化とAPIの整備を行います。
- [ ] **Step 1-1: データベース設計と構築**
    - Prismaスキーマの定義 (User, Reservation, GuestModel)
    - PostgreSQL (Supabase/Neon) のセットアップ
- [ ] **Step 1-2: API実装**
    - 宿泊者情報の保存API (POST /api/guests)
    - 予約状況確認API (GET /api/reservations/:id)

### Phase 2: 決済機能の完全統合
テストモードから本番運用に耐えうる決済フローを確立します。
- [ ] **Step 2-1: Stripe Webhook連携**
    - 決済成功時のステータス更新処理
    - 決済失敗時のフォールバック処理
- [ ] **Step 2-2: 領収書発行機能**
    - 決済完了後のメール送付 / PDFダウンロード

### Phase 3: スタッフ管理画面 (Dashboard)
現地のスタッフがリアルタイムで状況を確認できる画面を作成します。
- [ ] **Step 3-1: スタッフ認証**
    - 管理者ログイン機能の実装
- [ ] **Step 3-2: 予約・清掃管理**
    - 当日のチェックイン予定一覧表示
    - 清掃ステータスの管理
- [ ] **Step 3-3: ゲストリクエスト対応**
    - アメニティ追加依頼の通知と完了管理

### Phase 4: IoT & スマートロック連携 (Smart Stay)
物理デバイスとの連携を行い、完全無人化を目指します。
- [ ] **Step 4-1: スマートロックAPI連携**
    - RemoteLock / SwitchBot APIとの接続
    - 暗証番号の自動発行と更新
- [ ] **Step 4-2: 客室タブレット化**
    - 専用モード（キオスクモード）での動作検証

## 🛠 技術スタック
*   **Framework**: Next.js 14+ (App Router)
*   **Styling**: TailwindCSS v4
*   **Animation**: Framer Motion
*   **State Management**: Zustand
*   **Forms**: React Hook Form + Zod
*   **AI**: OpenAI API

## 💻 起動方法

1.  **依存関係のインストール**
    ```bash
    npm install
    ```

2.  **開発サーバーの起動**
    ```bash
    npm run dev
    ```

3.  **環境変数の設定 (任意)**
    `.env.local` ファイルを作成し、OpenAIのAPIキーを設定するとAIチャットが実際に動作します。
    ```env
    OPENAI_API_KEY=sk-...
    ```

## 💡 アイデア / 機能追加の議論 (Discussion)
さらなるゲスト体験の向上と収益化に向けた、追加機能のアイデアリストです。

### 1. ゲスト体験の深化 (Guest Experience)
*   **スマートロック連携 (Direct Unlock)**:
    *   現在は暗証番号の表示のみですが、API連携によりアプリ上の「Unlock」ボタンで直接解錠できるようにする。
    *   *メリット*: 利便性向上、紛失リスクゼロ。
<!-- *   **IoT家電コントロール (Smart Room)**:
    *   「電気を消して」「エアコンを24度に」などの操作をWebアプリから実⾏。
    *   *メリット*: 先進的な宿泊体験の提供。
*   **荷物配送 / 預かり手配**:
    *   チェックアウト後の荷物配送（ヤマト運輸連携など）や、駅でのロッカー予約。
    *   *メリット*: 手ぶら観光の推進。 -->

### 2. 収益化・アップセル (Monetization)
*   **レイトチェックアウト / アーリーチェックイン課金**:
    *   空室状況と連動し、追加料金を支払うことで滞在時間を延長できる機能。
    *   *メリット*: 単価アップ、柔軟な滞在。
<!-- *   **ルームサービス / デリバリー連携**:
    *   提携レストランからの食事デリバリーや、朝食の予約。
    *   *メリット*: 地元経済への貢献と手数料収入。
*   **アクティビティ・ツアー予約**:
    *   地域の体験ツアーやチケットの直接購入。 -->

<!-- ### 3. 安心・安全 (Safety & Trust)
*   **緊急時ワンタップコール**:
    *   警察・救急・消防への緊急連絡ボタン（多言語対応の定型文表示など）。
    *   *メリット*: 訪日外国人の不安解消。 -->
*   **有人サポートチャット**:
    *   AIで解決できない問い合せを、人間のスタッフにシームレスにエスカレーション。

### 4. ロイヤリティ (Engagement)
*   **デジタルゲストブック**:
    *   過去の宿泊者がおすすめのお店などを書き残せる機能。
    *   *メリット*: コミュニティ感の醸成。
<!-- *   **近隣店舗クーポン**:
    *   地域の飲食店と提携したQRクーポンの配布。 -->

## 🤖 Antigravityによる開発
このプロジェクトは、Google DeepMindによる高度なエージェント型コーディングアシスタント **Antigravity** の支援を受けて開発されています。
Antigravityは、コード生成、アーキテクチャ設計、複雑なリファクタリングタスクをサポートし、このゲストエクスペリエンスプラットフォームの開発プロセスを加速させています。
